<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Chaining methods together (pipe) &#8212; pybedtools 0.11.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=f3b36f1a"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Intervals" href="intervals.html" />
    <link rel="prev" title="Default arguments" href="default-arguments.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="chaining-methods-together-pipe">
<h1>Chaining methods together (pipe)<a class="headerlink" href="#chaining-methods-together-pipe" title="Link to this heading">¶</a></h1>
<p>One useful thing about <code class="xref py py-class docutils literal notranslate"><span class="pre">BedTool</span></code> methods is that they often return a
new <code class="xref py py-class docutils literal notranslate"><span class="pre">BedTool</span></code>.  In practice, this means that we can chain together
multiple method calls all in one line, similar to piping on the command
line.</p>
<p>For example, this intersect and merge can be combined into one command:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># These two lines...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x2</span> <span class="o">=</span> <span class="n">x1</span><span class="o">.</span><span class="n">merge</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ...can be combined into one line:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x3</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x2</span> <span class="o">==</span> <span class="n">x3</span>
<span class="go">True</span>
</pre></div>
</div>
<p>A rule of thumb is that all methods that wrap <a class="reference external" href="http://github.com/arq5x/bedtools">BEDTools</a> programs return
<code class="xref py py-class docutils literal notranslate"><span class="pre">BedTool</span></code> objects, so you can chain these together. Many
<code class="xref py py-mod docutils literal notranslate"><span class="pre">pybedtools</span></code>-unique methods return <code class="xref py py-class docutils literal notranslate"><span class="pre">BedTool</span></code> objects too, just
check the docs (according to <a class="reference internal" href="topical-design-principles.html#good-docs-principle"><span class="std std-ref">Principle 7: Check the help</span></a>). For example, as
we saw in one of the examples above, the <code class="xref py py-meth docutils literal notranslate"><span class="pre">BedTool.saveas()</span></code> method
returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">BedTool</span></code> object.  That means we can sprinkle those
commands within the example above to save the intermediate steps as
meaningful filenames for later use. For example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x4</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">saveas</span><span class="p">(</span><span class="s1">&#39;a-with-b.bed&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">()</span><span class="o">.</span><span class="n">saveas</span><span class="p">(</span><span class="s1">&#39;a-with-b-merged.bed&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we have new files in the current directory called <code class="file docutils literal notranslate"><span class="pre">a-with-b.bed</span></code>
and <code class="file docutils literal notranslate"><span class="pre">a-with-b-merged.bed</span></code>.  Since <code class="xref py py-meth docutils literal notranslate"><span class="pre">BedTool.saveas()</span></code> returns a
<code class="xref py py-class docutils literal notranslate"><span class="pre">BedTool</span></code> object, <code class="file docutils literal notranslate"><span class="pre">x4</span></code> points to the <code class="file docutils literal notranslate"><span class="pre">a-with-b-merged.bed</span></code>
file.</p>
<p>Sometimes it can be cleaner to separate consecutive calls on each line:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x4</span> <span class="o">=</span> <span class="n">a</span>\
<span class="gp">... </span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>\
<span class="gp">... </span><span class="o">.</span><span class="n">saveas</span><span class="p">(</span><span class="s1">&#39;a-with-b.bed&#39;</span><span class="p">)</span>\
<span class="gp">... </span><span class="o">.</span><span class="n">merge</span><span class="p">()</span>\
<span class="gp">... </span><span class="o">.</span><span class="n">saveas</span><span class="p">(</span><span class="s1">&#39;a-with-b-merged.bed&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="operator-overloading">
<h1>Operator overloading<a class="headerlink" href="#operator-overloading" title="Link to this heading">¶</a></h1>
<p>There’s an even easier way to chain together commands.</p>
<p>I found myself doing intersections so much that I thought it would be
useful to overload the <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> operators to do intersections.
To illustrate, these two example commands do the same thing:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x5</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x6</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x5</span> <span class="o">==</span> <span class="n">x6</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Just as the <code class="file docutils literal notranslate"><span class="pre">+</span></code> operator assumes <code class="file docutils literal notranslate"><span class="pre">intersectBed</span></code> with the <code class="file docutils literal notranslate"><span class="pre">-u</span></code> arg, the <code class="file docutils literal notranslate"><span class="pre">-</span></code>
operator assumes <code class="file docutils literal notranslate"><span class="pre">intersectBed</span></code> with the <code class="file docutils literal notranslate"><span class="pre">-v</span></code> arg:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x7</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x8</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x7</span> <span class="o">==</span> <span class="n">x8</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If you want to operating on the resulting <code class="xref py py-class docutils literal notranslate"><span class="pre">BedTool</span></code> that is
returned by an addition or subtraction, you’ll need to wrap the operation
in parentheses.  This is another way to do the chaining together of the
intersection and merge example from above:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x9</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">()</span>
</pre></div>
</div>
<p>And to double-check that all these methods return the same thing:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x2</span> <span class="o">==</span> <span class="n">x3</span> <span class="o">==</span> <span class="n">x4</span> <span class="o">==</span> <span class="n">x9</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You can learn more about chaining in <a class="reference internal" href="topical-design-principles.html#chaining-principle"><span class="std std-ref">Principle 6: Chaining together commands</span></a>.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pybedtools</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="main.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="main.html#running-tests-compiling-docs">Running tests, compiling docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="3-brief-examples.html">Three brief examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorial-contents.html">Tutorial Contents</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-a-bedtool-tutorial.html">Create a <code class="xref py py-class docutils literal notranslate"><span class="pre">BedTool</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="intersections.html">Intersections</a></li>
<li class="toctree-l2"><a class="reference internal" href="save-results.html">Saving the results</a></li>
<li class="toctree-l2"><a class="reference internal" href="default-arguments.html">Default arguments</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Chaining methods together (pipe)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#operator-overloading">Operator overloading</a></li>
<li class="toctree-l2"><a class="reference internal" href="intervals.html">Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="filtering.html">Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="each.html">Each</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html">Using the history and tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#deleting-temp-files-specific-to-a-single-bedtool">Deleting temp files specific to a single <code class="xref py py-class docutils literal notranslate"><span class="pre">BedTool</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="topical-documentation-contents.html">Topical Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQs.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc_source.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pybedtools</span></code> Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="tutorial-contents.html">Tutorial Contents</a><ul>
      <li>Previous: <a href="default-arguments.html" title="previous chapter">Default arguments</a></li>
      <li>Next: <a href="intervals.html" title="next chapter">Intervals</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="intervals.html" title="Intervals"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="default-arguments.html" title="Default arguments"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pybedtools 0.11.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="tutorial-contents.html" accesskey="U">Tutorial Contents</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Chaining methods together (pipe)</a></li> 
      </ul>
    </div>


    <div class="footer">
      &#169;2010-2015, Ryan Dale.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/piping.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>